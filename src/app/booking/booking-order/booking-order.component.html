<body class="hold-transition sidebar-mini text-sm layout-fixed layout-navbar-fixed layout-footer-fixed">
  <div class="wrapper">
    <!-- Navbar -->
    <app-topbar></app-topbar>
    <!-- /.navbar -->

    <!-- Main Sidebar Container -->
    <app-sidebar></app-sidebar>

    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
      <!-- Content Header (Page header) -->
      <div class="content-header">
        <div class="container-fluid">
          <div class="row mb-2">
            <div class="col-sm-6">
              <h1 class="m-0 text-dark">Booking Order</h1><br />
            </div><!-- /.col -->
            <div class="col-sm-6">
              <ol class="breadcrumb float-sm-right">
                <li class="breadcrumb-item"><a routerLink="/dashboard">Dashboard</a></li>
                <li class="breadcrumb-item active">Booking Order</li>
              </ol>
            </div><!-- /.col -->
          </div><!-- /.row -->
        </div><!-- /.container-fluid -->
      </div>
      <!-- /.content-header -->

      <!-- Main content -->
      <div class="content">
        <div class="container-fluid">
          <!-- Default box -->
          <div *ngIf="viewMode" class="row">
            <div class="col">
              <div class="card">
                <div class="card-header">
                  <a (click)="viewMode=false" class="btn btn-primary">Back</a>
                </div>
                <div class="card-header">
                  <h5 class="card-title">Booking Detail</h5>
                </div>
                <div class="card-body">
                  <p class="card-text">Customer Name : {{BookingSingle.name}}</p>
                  <p class="card-text">Invoice Number : {{BookingSingle.invoice}}</p>
                  <p class="card-text">Account Name : {{BookingSingle.account_name}}</p>
                  <p class="card-text">Account Number : {{BookingSingle.account_number}}</p>
                  <p class="card-text">Date Created : {{DisplayDate(BookingSingle.created_at)}}</p>
                  <p class="card-text">Start Booking : {{DisplayDate(BookingSingle.start_date)}}</p>
                  <p class="card-text">End Booking : {{DisplayDate(BookingSingle.end_date)}}</p>
                  <p class="card-text">Address : {{BookingSingle.address}}</p>
                  <p class="card-text">Status : {{BookingSingle.status_transaction}}</p>
                </div>
                <div class="card-header">
                  <h5 class="card-title">Booking Payment Detail</h5>
                </div>
                <div class="card-body">
                  <p class="card-text">Payment Deadline : {{DisplayDate(BookingSingle.payment_deadline)}}</p>
                  <p class="card-text">Payment Bank Name : {{BookingSingle.payment_bank_name}}</p>
                  <p class="card-text">Payment Account Name : {{BookingSingle.payment_account_name}}</p>
                  <p class="card-text">Payment Account Number : {{BookingSingle.payment_account_number}}</p>
                  <p class="card-text">Payment Amount : {{BookingSingle.payment_amount}}</p>
                  <p class="card-text">Repayment Bank Name : {{BookingSingle.repayment_bank_name}}</p>
                  <p class="card-text">Repayment Account Name : {{BookingSingle.repayment_account_name}}</p>
                  <p class="card-text">Repayment Account Number : {{BookingSingle.repayment_account_number}}</p>
                  <p class="card-text">Repayment Amount : {{BookingSingle.repayment_amount}}</p>
                  <p class="card-text">Total Bill Amount : {{BookingSingle.total_bill_amount}}</p>
                </div>
                <div class="card-header">
                  <h5 class="card-title">Fitting</h5>
                </div>
                <div class="card-body">
                  <p class="card-text">Bust : {{BookingSingle.bust}}</p>
                  <p class="card-text">Arm Hole : {{BookingSingle.arm_hole}}</p>
                  <p class="card-text">Waist : {{BookingSingle.waist}}</p>
                  <p class="card-text">Hip : {{BookingSingle.hip}}</p>
                </div>
              </div>
            </div>
            <div class="col">
              <div class="card">
                <div class="card-header">
                  Product Image
                </div>
                <img *ngIf="BookingSingle.path_photo !=''" src="http://absdigital.id:5000{{ BookingSingle.path_photo }}"
                  style="width: 100%;">
                <p class="card-text" *ngIf="BookingSingle.path_photo ==''"> No Image</p>
              </div>
            </div>
          </div>


          <div *ngIf="!viewMode" class="card">
            <div class="card-header">
              <h3 class="card-title">Booking Order List</h3>
              <div class="card-tools">
                <input (input)="filterData($event)" placeholder="Invoice Number, Customer Name or Product Name"
                  style="width: 400px;" />
                <button type="button" class="btn btn-tool" data-card-widget="collapse" data-toggle="tooltip"
                  title="Collapse"><i class="fas fa-minus"></i></button>
              </div>
            </div>
            <div class="card-body">
              <table class="table table-bordered table-striped" style="font-size: small;">
                <thead>
                  <tr>
                    <th>Invoice Number</th>
                    <th>Customer Name</th>
                    <th>Product Image</th>
                    <th>Product Name</th>
                    <th>Product Price</th>
                    <th>Down Payment</th>
                    <th>Remaining Bills</th>
                    <th>Status Transaction</th>
                    <th>Approve Payment</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody *ngFor="let booking of dataBookingOrder">
                  <tr *ngIf="booking.status !=5" [ngClass]="(booking.status == 1)?'table-danger':
                  (booking.status == 2)?'table-warning':'table-success'
                  ">
                    <td>{{ booking.invoice }}</td>
                    <td>{{ booking.name | titlecase }}</td>
                    <td><img *ngIf="booking.path_photo !=''" src="http://absdigital.id:5000{{ booking.path_photo }}"
                        style="width: 150px; height: 150px;"></td>
                    <td>{{ booking.product_name | titlecase }}</td>
                    <td>{{ booking.paid_price | currency:'Rp ':'symbol':'3.0'}}</td>
                    <td>{{ booking.down_payment | currency:'Rp ':'symbol':'3.0' }}</td>
                    <td>{{ booking.remaining_bills | currency:'Rp ':'symbol':'3.0' }}</td>
                    <td>{{ booking.status_transaction | titlecase }}</td>
                    <td class="text-center">
                      <a *ngIf="booking.status ==1" (click)="processBooking(booking.id_transaction)"
                        class="btn btn-default"><i class="fas fa-check-circle"></i> Process</a>
                      <a *ngIf="booking.status ==2" (click)="doneBooking(booking.id_transaction)"
                        class="btn btn-default"><i class="fas fa-check-circle"></i> Finish</a>
                      <p *ngIf="booking.status ==3">Done</p>
                    </td>
                    <td class="text-center">
                      <a (click)="viewData(booking)" type="button"> View </a>
                    </td>
                  </tr>
                </tbody>
                <tfoot>
                  <tr>
                    <th>Invoice Number</th>
                    <th>Customer Name</th>
                    <th>Product Image</th>
                    <th>Product Name</th>
                    <th>Product Price</th>
                    <th>Down Payment</th>
                    <th>Remaining Bills</th>
                    <th>Status Transaction</th>
                    <th>Approve Payment</th>
                    <th></th>
                  </tr>
                </tfoot>
              </table>
            </div>
            <!-- /.card-body -->
          </div>
          <!-- /.card -->
        </div><!-- /.container-fluid -->
      </div>
      <!-- /.content -->
    </div>
    <!-- /.content-wrapper -->

    <!-- Control Sidebar -->
    <app-control-sidebar></app-control-sidebar>
    <!-- /.control-sidebar -->

    <!-- Main Footer -->
    <app-footer></app-footer>
  </div>
  <!-- ./wrapper -->

</body>